package pgstorage

import (
	"context"
	"fmt"

	"github.com/jackc/pgx/v5/pgxpool"
	"github.com/pkg/errors"
)

type PGstorage struct {
	db *pgxpool.Pool
}

func NewPGStore(connString string) (*PGstorage, error) {
	config, err := pgxpool.ParseConfig(connString)
	if err != nil {
		return nil, errors.Wrap(err, "ошибка парсинга конфига")
	}

	db, err := pgxpool.NewWithConfig(context.Background(), config)
	if err != nil {
		return nil, errors.Wrap(err, "ошибка подключения")
	}
	storage := &PGstorage{
		db: db,
	}
	err = storage.initTables()
	if err != nil {
		return nil, err
	}
	err = storage.addTopicsData()
	if err != nil {
		return nil, err
	}
	err = storage.addQuestionsForTopics()
	if err != nil {
		return nil, err
	}

	return storage, nil
}

func (s *PGstorage) initTables() error {
	sql := fmt.Sprintf(`
		CREATE TABLE IF NOT EXISTS %v (
			%v SERIAL PRIMARY KEY,
			%v VARCHAR(100) NOT NULL UNIQUE,
			%v BOOLEAN DEFAULT TRUE,
			%v TIMESTAMP DEFAULT CURRENT_TIMESTAMP
		);
		CREATE TABLE IF NOT EXISTS %v (
			%v SERIAL PRIMARY KEY,
			%v INTEGER,
			%v TEXT UNIQUE,
			%v JSONB,
			%v SMALLINT NOT NULL,
			%v VARCHAR(20) NOT NULL,
			%v TIMESTAMP DEFAULT CURRENT_TIMESTAMP
		);`,
		topics_tableName, topics_IDColumnName, topics_TitleColumnName, topics_IsActiveColumnName, topics_CreateAtColumnName,
		questions_tableName, questions_IDColumnName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_CreatedAtColumnName,
	)
	_, err := s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "inition tables")
	}
	return nil
}

func (s *PGstorage) addTopicsData() error {
	sql := fmt.Sprintf(`
		INSERT INTO %v (%v) VALUES 
			('История России'),
			('Всемирная история'),
			('География мира'),
			('Биология'),
			('Химия'),
			('Физика'),
			('Математика'),
			('Программирование')
		ON CONFLICT (title)
		DO NOTHING;
	`,
		topics_tableName, topics_TitleColumnName)
	_, err := s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add topics data")
	}
	return nil
}

func (s *PGstorage) addQuestionsForTopics() error {
	// История России
	sql := fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
			(1, 'В каком году произошло Крещение Руси?', '["988", "998", "1015", "1054"]', 0, 'простой'),
			(1, 'Кто был первым царём из династии Романовых?', '["Михаил Фёдорович", "Алексей Михайлович", "Пётр I", "Иван IV"]', 0, 'простой'),
			(1, 'Какой город был столицей Древней Руси?', '["Киев", "Москва", "Новгород", "Владимир"]', 0, 'простой'),
			(1, 'Кто победил в Куликовской битве?', '["Дмитрий Донской", "Александр Невский", "Иван Калита", "Юрий Долгорукий"]', 0, 'простой'),
			(1, 'В каком веке правил Иван Грозный?', '["XVI", "XV", "XVII", "XIV"]', 0, 'простой'),
			(1, 'Как называлось первое русское государство?', '["Киевская Русь", "Московское царство", "Новгородская республика", "Владимиро-Суздальское княжество"]', 0, 'простой'),
			(1, 'Кто основал Санкт-Петербург?', '["Пётр I", "Екатерина II", "Александр I", "Павел I"]', 0, 'простой'),
			(1, 'В каком году отменили крепостное право?', '["1861", "1864", "1855", "1870"]', 0, 'простой'),
			(1, 'Кто был последним императором России?', '["Николай II", "Александр III", "Пётр III", "Александр I"]', 0, 'простой'),

			(1, 'Какой год считается началом Смутного времени?', '["1598", "1613", "1605", "1584"]', 0, 'средний'),
			(1, 'Кто возглавил первое кругосветное плавание русских?', '["И.Ф. Крузенштерн", "Ф.Ф. Беллинсгаузен", "В.И. Беринг", "С.И. Дежнёв"]', 0, 'средний'),
			(1, 'В каком году был издан Судебник Ивана III?', '["1497", "1550", "1649", "1380"]', 0, 'средний'),
			(1, 'Какой договор завершил Северную войну?', '["Ништадтский", "Столбовский", "Андрусовский", "Ясский"]', 0, 'средний'),
			(1, 'Кто был регентом при малолетнем Иване IV?', '["Елена Глинская", "Софья Палеолог", "Анастасия Романовна", "Мария Нагая"]', 0, 'средний'),
			(1, 'Как назывался высший совет при князе в Древней Руси?', '["Боярская дума", "Вече", "Земский собор", "Сенат"]', 0, 'средний'),
			(1, 'В каком году произошло восстание декабристов?', '["1825", "1812", "1855", "1799"]', 0, 'средний'),

			(1, 'Какой титул имел Александр Невский кроме князя?', '["Ханский баскак", "Вице-король", "Великий воевода", "Старший дружинник"]', 0, 'сложный'),
			(1, 'Кто автор "Повести временных лет"?', '["Нестор", "Иларион", "Сильвестр", "Даниил Заточник"]', 0, 'сложный'),
			(1, 'Какой город был столицей Золотой Орды?', '["Сарай", "Булгар", "Ургенч", "Хаджи-Тархан"]', 0, 'сложный'),
			(1, 'В каком году был созван первый Земский собор?', '["1549", "1551", "1566", "1598"]', 0, 'сложный'),
			(1, 'Кто руководил обороной Смоленска в 1609-1611 гг.?', '["Михаил Шеин", "Дмитрий Пожарский", "Кузьма Минин", "Иван Сусанин"]', 0, 'сложный'),
			(1, 'Какой чин был высшим в Табели о рангах?', '["Канцлер", "Генерал-фельдмаршал", "Действительный тайный советник", "Обер-камергер"]', 0, 'сложный'),
			(1, 'Кто возглавлял Временное правительство в июле-октябре 1917 года?', '["А.Ф. Керенский", "Г.Е. Львов", "П.Н. Милюков", "А.И. Гучков"]', 0, 'сложный')
		ON conflict (%v)
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	_, err := s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add questions data")
	}

	// Всемирная история
	sql = fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
			(2, 'В каком году началась Вторая мировая война?', '["1939", "1941", "1914", "1945"]', 0, 'простой'),
			(2, 'Кто был первым президентом США?', '["Джордж Вашингтон", "Авраам Линкольн", "Томас Джефферсон", "Бенджамин Франклин"]', 0, 'простой'),
			(2, 'В какой стране возникла цивилизация Древнего Египта?', '["Египет", "Греция", "Месопотамия", "Индия"]', 0, 'простой'),
			(2, 'Кто открыл Америку?', '["Христофор Колумб", "Васко да Гама", "Фернан Магеллан", "Америго Веспуччи"]', 0, 'простой'),
			(2, 'В каком веке произошла Великая французская революция?', '["XVIII", "XVI", "XVII", "XIX"]', 0, 'простой'),
			(2, 'Кто был римским императором во время распятия Иисуса?', '["Тиберий", "Октавиан Август", "Нерон", "Калигула"]', 0, 'простой'),
			(2, 'Какой город был столицей Византийской империи?', '["Константинополь", "Рим", "Афины", "Александрия"]', 0, 'простой'),
			(2, 'Кто написал "Декларацию независимости США"?', '["Томас Джефферсон", "Джордж Вашингтон", "Бенджамин Франклин", "Джон Адамс"]', 0, 'простой'),
			(2, 'В каком году пала Западная Римская империя?', '["476", "410", "395", "1453"]', 0, 'простой'),

			(2, 'Кто был первым императором Китая?', '["Цинь Шихуанди", "У-ди", "Гао-цзу", "Чжоу-гун"]', 0, 'средний'),
			(2, 'В каком году началась Столетняя война?', '["1337", "1346", "1415", "1453"]', 0, 'средний'),
			(2, 'Кто возглавил реформацию в Германии?', '["Мартин Лютер", "Жан Кальвин", "Ульрих Цвингли", "Эразм Роттердамский"]', 0, 'средний'),
			(2, 'Какой город был столицей Ассирийской империи?', '["Ниневия", "Вавилон", "Сузы", "Персеполь"]', 0, 'средний'),
			(2, 'Кто был последним фараоном Древнего Египта?', '["Клеопатра VII", "Тутмос III", "Рамсес II", "Хатшепсут"]', 0, 'средний'),
			(2, 'В каком году была подписана Великая хартия вольностей?', '["1215", "1066", "1348", "1415"]', 0, 'средний'),
			(2, 'Кто основал империю Монголов?', '["Чингисхан", "Хубилай", "Аттила", "Тамерлан"]', 0, 'средний'),

			(2, 'Какой правитель возглавил Варфоломеевскую ночь?', '["Екатерина Медичи", "Карл IX", "Генрих IV", "Франциск II"]', 0, 'сложный'),
			(2, 'Кто был первым халифом из династии Аббасидов?', '["Абу-ль-Аббас ас-Саффах", "Абу Джафар аль-Мансур", "Харун ар-Рашид", "Аль-Мамун"]', 0, 'сложный'),
			(2, 'В каком году был заключен Вестфальский мир?', '["1648", "1618", "1659", "1667"]', 0, 'сложный'),
			(2, 'Кто возглавлял Якобинский клуб во время Французской революции?', '["Максимилиан Робеспьер", "Жорж Дантон", "Жан-Поль Марат", "Луи де Сен-Жюст"]', 0, 'сложный'),
			(2, 'Какой договор завершил Наполеоновские войны?', '["Венский конгресс", "Тильзитский мир", "Амьенский мир", "Пресбургский мир"]', 0, 'сложный'),
			(2, 'Кто был первым императором Священной Римской империи?', '["Оттон I", "Карл Великий", "Фридрих I Барбаросса", "Генрих IV"]', 0, 'сложный'),
			(2, 'В каком году произошла битва при Каннах?', '["216 до н.э.", "218 до н.э.", "202 до н.э.", "241 до н.э."]', 0, 'сложный')
		ON conflict (%v)
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	_, err = s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add questions data")
	}

	// География мира
	sql = fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
			(3, 'Какая самая длинная река в мире?', '["Нил", "Амазонка", "Янцзы", "Миссисипи"]', 0, 'простой'),
			(3, 'Какой океан самый большой по площади?', '["Тихий", "Атлантический", "Индийский", "Северный Ледовитый"]', 0, 'простой'),
			(3, 'Какая самая высокая гора в мире?', '["Эверест", "К2", "Килиманджаро", "Монблан"]', 0, 'простой'),
			(3, 'В какой стране находится пирамида Хеопса?', '["Египет", "Мексика", "Перу", "Судан"]', 0, 'простой'),
			(3, 'Какая пустыня самая большая в мире?', '["Сахара", "Гоби", "Аравийская", "Калахари"]', 0, 'простой'),
			(3, 'Сколько материков на Земле?', '["6", "5", "7", "4"]', 0, 'простой'),
			(3, 'Какая столица Франции?', '["Париж", "Лондон", "Берлин", "Мадрид"]', 0, 'простой'),
			(3, 'Какой пролив разделяет Европу и Африку?', '["Гибралтарский", "Босфор", "Дарданеллы", "Баб-эль-Мандебский"]', 0, 'простой'),
			(3, 'Какое озеро самое глубокое в мире?', '["Байкал", "Танганьика", "Каспийское море", "Верхнее"]', 0, 'простой'),

			(3, 'Какое государство самое большое по площади?', '["Россия", "Канада", "Китай", "США"]', 0, 'средний'),
			(3, 'Какой водопад самый высокий в мире?', '["Анхель", "Ниагарский", "Виктория", "Игуасу"]', 0, 'средний'),
			(3, 'Какая река протекает через Париж?', '["Сена", "Темза", "Дунай", "Рейн"]', 0, 'средний'),
			(3, 'В какой стране находится вулкан Кракатау?', '["Индонезия", "Япония", "Италия", "Исландия"]', 0, 'средний'),
			(3, 'Какой полуостров самый большой в мире?', '["Аравийский", "Скандинавский", "Индостан", "Лабрадор"]', 0, 'средний'),
			(3, 'Какое море не имеет берегов?', '["Саргассово", "Карибское", "Красное", "Балтийское"]', 0, 'средний'),
			(3, 'Столица какой страны находится южнее всех?', '["Новая Зеландия", "Австралия", "ЮАР", "Аргентина"]', 0, 'средний'),

			(3, 'Какой пролив соединяет Тихий и Атлантический океаны?', '["Магелланов", "Дрейка", "Берингов", "Малаккский"]', 0, 'сложный'),
			(3, 'Какое озеро находится на границе Перу и Боливии?', '["Титикака", "Маракайбо", "Поопо", "Хунтин"]', 0, 'сложный'),
			(3, 'Какой вулкан является самым высоким в Африке?', '["Килиманджаро", "Кения", "Меру", "Камерун"]', 0, 'сложный'),
			(3, 'Какая страна имеет наибольшее количество часовых поясов?', '["Франция", "Россия", "США", "Великобритания"]', 0, 'сложный'),
			(3, 'Какой залив является самым большим в мире?', '["Бенгальский", "Мексиканский", "Гвинейский", "Аляска"]', 0, 'сложный'),
			(3, 'Какая река образует границу между США и Мексикой?', '["Рио-Гранде", "Колорадо", "Миссисипи", "Колумбия"]', 0, 'сложный'),
			(3, 'На каком острове находится самая высокая гора Индонезии?', '["Новая Гвинея", "Ява", "Суматра", "Калимантан"]', 0, 'сложный')
		ON conflict (%v)
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	_, err = s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add questions data")
	}

	// Биология
	sql = fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
			(4, 'Сколько хромосом у человека?', '["46", "23", "48", "24"]', 0, 'простой'),
			(4, 'Какое растение является символом Канады?', '["Клён", "Дуб", "Берёза", "Сосна"]', 0, 'простой'),
			(4, 'Какое животное самое быстрое на суше?', '["Гепард", "Лев", "Антилопа", "Лошадь"]', 0, 'простой'),
			(4, 'Какой орган отвечает за перекачивание крови?', '["Сердце", "Печень", "Лёгкие", "Почки"]', 0, 'простой'),
			(4, 'Какое животное является самым большим на Земле?', '["Синий кит", "Слон", "Жираф", "Бегемот"]', 0, 'простой'),
			(4, 'Как называется процесс образования кислорода растениями?', '["Фотосинтез", "Дыхание", "Транспирация", "Осмос"]', 0, 'простой'),
			(4, 'Сколько ног у паука?', '["8", "6", "10", "4"]', 0, 'простой'),
			(4, 'Какая птица не умеет летать?', '["Пингвин", "Орёл", "Сокол", "Аист"]', 0, 'простой'),
			(4, 'Какой газ необходим для дыхания человека?', '["Кислород", "Азот", "Углекислый газ", "Водород"]', 0, 'простой'),

			(4, 'Какой белок отвечает за перенос кислорода в крови?', '["Гемоглобин", "Коллаген", "Миозин", "Кератин"]', 0, 'средний'),
			(4, 'Какое растение является хищным?', '["Росянка", "Роза", "Тюльпан", "Орхидея"]', 0, 'средний'),
			(4, 'Сколько камер в сердце млекопитающих?', '["4", "2", "3", "5"]', 0, 'средний'),
			(4, 'Какой витамин вырабатывается под воздействием солнца?', '["D", "A", "C", "B12"]', 0, 'средний'),
			(4, 'Какое животное имеет три сердца?', '["Осьминог", "Кальмар", "Медуза", "Акула"]', 0, 'средний'),
			(4, 'Как называется процесс деления клетки?', '["Митоз", "Мейоз", "Осмос", "Диффузия"]', 0, 'средний'),
			(4, 'Какая ткань проводит воду в растениях?', '["Ксилема", "Флоэма", "Паренхима", "Камбий"]', 0, 'средний'),

			(4, 'Какой фермент расщепляет крахмал?', '["Амилаза", "Пепсин", "Липаза", "Трипсин"]', 0, 'сложный'),
			(4, 'Сколько пар рёбер у человека?', '["12", "10", "14", "8"]', 0, 'сложный'),
			(4, 'Какое растение имеет самые крупные семена?', '["Сейшельская пальма", "Кокосовая пальма", "Баобаб", "Эвкалипт"]', 0, 'сложный'),
			(4, 'Какой гормон регулирует уровень сахара в крови?', '["Инсулин", "Адреналин", "Тироксин", "Кортизол"]', 0, 'сложный'),
			(4, 'Сколько аминокислот являются незаменимыми для человека?', '["9", "8", "10", "12"]', 0, 'сложный'),
			(4, 'Какое животное имеет самый большой мозг относительно тела?', '["Муравей", "Дельфин", "Человек", "Слон"]', 0, 'сложный'),
			(4, 'Как называется симбиоз гриба и водоросли?', '["Лишайник", "Микориза", "Паразитизм", "Комменсализм"]', 0, 'сложный')
		ON conflict (%v)
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	_, err = s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add questions data")
	}

	// Химия
	sql = fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
		ON conflict (%v)
			(5, 'Какой химический элемент обозначается символом O?', '["Кислород", "Олово", "Осмий", "Органиум"]', 0, 'простой'),
			(5, 'Какова химическая формула воды?', '["H₂O", "CO₂", "NaCl", "H₂O₂"]', 0, 'простой'),
			(5, 'Какой газ делает голос ниже при вдыхании?', '["Гелий", "Водород", "Кислород", "Азот"]', 0, 'простой'),
			(5, 'Что такое pH?', '["Показатель кислотности", "Плотность вещества", "Температура кипения", "Массовая доля"]', 0, 'простой'),
			(5, 'Какой металл является жидким при комнатной температуре?', '["Ртуть", "Железо", "Медь", "Алюминий"]', 0, 'простой'),
			(5, 'Какой элемент самый распространенный во Вселенной?', '["Водород", "Кислород", "Углерод", "Гелий"]', 0, 'простой'),
			(5, 'Что такое алмаз?', '["Аллотропная форма углерода", "Оксид кремния", "Карбид кальция", "Сульфид цинка"]', 0, 'простой'),
			(5, 'Какой газ необходим для горения?', '["Кислород", "Азот", "Углекислый газ", "Водород"]', 0, 'простой'),
			(5, 'Что такое ржавчина?', '["Оксид железа", "Сульфат меди", "Карбонат кальция", "Нитрат калия"]', 0, 'простой'),

			(5, 'Какой элемент имеет атомный номер 1?', '["Водород", "Гелий", "Литий", "Кислород"]', 0, 'средний'),
			(5, 'Что такое катализатор?', '["Вещество, ускоряющее реакцию", "Вещество, замедляющее реакцию", "Конечный продукт реакции", "Исходное вещество"]', 0, 'средний'),
			(5, 'Какой кислотой богаты лимоны?', '["Лимонная", "Аскорбиновая", "Соляная", "Уксусная"]', 0, 'средний'),
			(5, 'Что такое изотопы?', '["Атомы одного элемента с разным числом нейтронов", "Разные аллотропные формы", "Соединения с одинаковой формулой", "Разные заряды ионов"]', 0, 'средний'),
			(5, 'Какой металл является самым электропроводным?', '["Серебро", "Медь", "Золото", "Алюминий"]', 0, 'средний'),
			(5, 'Что такое моль в химии?', '["Единица количества вещества", "Единица массы", "Единица объема", "Единица концентрации"]', 0, 'средний'),
			(5, 'Какой газ имеет запах тухлых яиц?', '["Сероводород", "Аммиак", "Метан", "Озон"]', 0, 'средний'),

			(5, 'Сколько электронов на внешнем уровне у азота?', '["5", "3", "7", "2"]', 0, 'сложный'),
			(5, 'Какой элемент был открыт первым?', '["Фосфор", "Кислород", "Водород", "Золото"]', 0, 'сложный'),
			(5, 'Что такое алкалоиды?', '["Азотсодержащие органические соединения", "Соли жирных кислот", "Простые эфиры", "Углеводороды"]', 0, 'сложный'),
			(5, 'Какой металл самый тугоплавкий?', '["Вольфрам", "Титан", "Платина", "Хром"]', 0, 'сложный'),
			(5, 'Что такое число Авогадро?', '["6,02×10²³", "3,14", "9,81", "1,6×10⁻¹⁹"]', 0, 'сложный'),
			(5, 'Какой элемент имеет самую высокую электроотрицательность?', '["Фтор", "Кислород", "Хлор", "Азот"]', 0, 'сложный'),
			(5, 'Что такое координационное число?', '["Число ближайших соседей атома", "Заряд иона", "Степень окисления", "Количество электронов"]', 0, 'сложный')
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	_, err = s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add questions data")
	}

	// Физика
	sql = fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
			(6, 'Какова скорость света в вакууме?', '["300 000 км/с", "150 000 км/с", "1 000 000 км/с", "30 000 км/с"]', 0, 'простой'),
			(6, 'Кто открыл закон всемирного тяготения?', '["Ньютон", "Эйнштейн", "Галилей", "Коперник"]', 0, 'простой'),
			(6, 'Что измеряется в герцах?', '["Частота", "Сила", "Давление", "Энергия"]', 0, 'простой'),
			(6, 'Какой прибор измеряет температуру?', '["Термометр", "Барометр", "Амперметр", "Вольтметр"]', 0, 'простой'),
			(6, 'Что такое сила тяжести?', '["Сила притяжения к Земле", "Сила трения", "Сила упругости", "Сила Архимеда"]', 0, 'простой'),
			(6, 'В каких единицах измеряется сила?', '["Ньютоны", "Джоули", "Ватты", "Паскали"]', 0, 'простой'),
			(6, 'Что такое электрический ток?', '["Движение заряженных частиц", "Магнитное поле", "Электрическое поле", "Тепловая энергия"]', 0, 'простой'),
			(6, 'Какой газ используется в воздушных шарах?', '["Гелий", "Водород", "Кислород", "Азот"]', 0, 'простой'),
			(6, 'Что такое фотон?', '["Частица света", "Атом водорода", "Электрон", "Протон"]', 0, 'простой'),

			(6, 'Кто разработал теорию относительности?', '["Эйнштейн", "Ньютон", "Галилей", "Планк"]', 0, 'средний'),
			(6, 'Что такое инерция?', '["Свойство сохранять состояние движения", "Сила трения", "Ускорение", "Энергия покоя"]', 0, 'средний'),
			(6, 'Какой закон описывает плавание тел?', '["Закон Архимеда", "Закон Паскаля", "Закон Гука", "Закон Ома"]', 0, 'средний'),
			(6, 'Что такое сверхпроводимость?', '["Нулевое сопротивление", "Бесконечная проводимость", "Высокая теплоемкость", "Магнитные свойства"]', 0, 'средний'),
			(6, 'Какой элемент используется в атомных реакторах?', '["Уран", "Плутоний", "Торий", "Все варианты"]', 3, 'средний'),
			(6, 'Что такое квант?', '["Порция энергии", "Частица света", "Единица заряда", "Единица массы"]', 0, 'средний'),
			(6, 'Какой цвет имеет самая короткая длина волны?', '["Фиолетовый", "Красный", "Зеленый", "Желтый"]', 0, 'средний'),

			(6, 'Что такое принцип неопределенности Гейзенберга?', '["Невозможность точно измерить координату и импульс", "Зависимость массы от скорости", "Квантование энергии", "Волновая природа частиц"]', 0, 'сложный'),
			(6, 'Сколько кварков в протоне?', '["3", "2", "4", "1"]', 0, 'сложный'),
			(6, 'Что такое черная дыра?', '["Объект с огромной гравитацией", "Отверстие в пространстве", "Темная материя", "Нейтронная звезда"]', 0, 'сложный'),
			(6, 'Какой закон описывает излучение абсолютно черного тела?', '["Закон Планка", "Закон Стефана-Больцмана", "Закон Вина", "Закон Кирхгофа"]', 0, 'сложный'),
			(6, 'Что такое бозон Хиггса?', '["Частица, отвечающая за массу", "Частица света", "Носитель слабого взаимодействия", "Составная частица"]', 0, 'сложный'),
			(6, 'Сколько измерений в теории струн?', '["11", "3", "4", "26"]', 0, 'сложный'),
			(6, 'Что такое энтропия?', '["Мера беспорядка", "Тепловая энергия", "Потенциальная энергия", "Кинетическая энергия"]', 0, 'сложный')
		ON conflict (%v)
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	_, err = s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add questions data")
	}

	// Математика
	sql = fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
			(7, 'Сколько будет 2 + 2 × 2?', '["6", "8", "4", "10"]', 0, 'простой'),
			(7, 'Что такое простое число?', '["Число, делящееся только на 1 и себя", "Число, делящееся на 2", "Число больше 100", "Отрицательное число"]', 0, 'простой'),
			(7, 'Чему равно π примерно?', '["3,14", "2,71", "1,41", "1,61"]', 0, 'простой'),
			(7, 'Что такое гипотенуза?', '["Сторона напротив прямого угла", "Высота треугольника", "Основание треугольника", "Боковая сторона"]', 0, 'простой'),
			(7, 'Сколько градусов в прямом угле?', '["90", "180", "45", "360"]', 0, 'простой'),
			(7, 'Что такое квадратный корень из 16?', '["4", "8", "2", "6"]', 0, 'простой'),
			(7, 'Сколько сантиметров в метре?', '["100", "10", "1000", "50"]', 0, 'простой'),
			(7, 'Что такое сумма углов треугольника?', '["180°", "90°", "360°", "270°"]', 0, 'простой'),
			(7, 'Как называется число, обратное 2?', '["1/2", "2", "-2", "0,2"]', 0, 'простой'),

			(7, 'Что такое производная?', '["Скорость изменения функции", "Площадь под кривой", "Корень уравнения", "Предел последовательности"]', 0, 'средний'),
			(7, 'Сколько вершин у куба?', '["8", "6", "12", "4"]', 0, 'средний'),
			(7, 'Что такое мнимая единица?', '["i", "e", "π", "φ"]', 0, 'средний'),
			(7, 'Чему равен синус 90°?', '["1", "0", "0,5", "0,707"]', 0, 'средний'),
			(7, 'Что такое логарифм?', '["Обратная функция к возведению в степень", "Показатель степени", "Основание степени", "Корень уравнения"]', 0, 'средний'),
			(7, 'Сколько диагоналей у пятиугольника?', '["5", "6", "4", "7"]', 0, 'средний'),
			(7, 'Что такое интеграл?', '["Площадь под кривой", "Производная", "Предел", "Корень"]', 0, 'средний'),

			(7, 'Что такое теорема Ферма?', '["xⁿ + yⁿ = zⁿ не имеет решений при n>2", "Теорема о простых числах", "Теорема о пределе", "Теорема о производной"]', 0, 'сложный'),
			(7, 'Сколько правильных многогранников?', '["5", "4", "6", "8"]', 0, 'сложный'),
			(7, 'Что такое трансцендентное число?', '["Не является корнем многочлена", "Иррациональное число", "Комплексное число", "Простое число"]', 0, 'сложный'),
			(7, 'Кто доказал теорему Ферма?', '["Эндрю Уайлс", "Леонард Эйлер", "Карл Гаусс", "Бернард Риман"]', 0, 'сложный'),
			(7, 'Что такое гипотеза Римана?', '["О нулях дзета-функции", "О простых числах", "О комплексных числах", "О дифференциальных уравнениях"]', 0, 'сложный'),
			(7, 'Сколько измерений у гиперкуба?', '["4", "3", "5", "2"]', 0, 'сложный'),
			(7, 'Что такое группа в математике?', '["Множество с операцией", "Множество чисел", "Совокупность функций", "Система уравнений"]', 0, 'сложный')
		ON conflict (%v)
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	_, err = s.db.Exec(context.Background(), sql)
	if err != nil {
		return errors.Wrap(err, "add questions data")
	}

	// Программирование
	sql = fmt.Sprintf(`
		INSERT INTO %v (%v, %v, %v, %v, %v) VALUES
			(8, 'Что такое переменная в программировании?', '["Именованная область памяти", "Функция", "Цикл", "Условие"]', 0, 'простой'),
			(8, 'Какой язык программирования создал Гвидо ван Россум?', '["Python", "Java", "C++", "JavaScript"]', 0, 'простой'),
			(8, 'Что такое HTML?', '["Язык разметки", "Язык программирования", "База данных", "Фреймворк"]', 0, 'простой'),
			(8, 'Какой символ используется для комментариев в Python?', '["#", "//", "/*", "--"]', 0, 'простой'),
			(8, 'Что такое алгоритм?', '["Последовательность шагов", "Язык программирования", "Тип данных", "Переменная"]', 0, 'простой'),
			(8, 'Какой тип данных используется для целых чисел?', '["int", "float", "str", "bool"]', 0, 'простой'),
			(8, 'Что такое цикл?', '["Повторение блока кода", "Условие", "Функция", "Переменная"]', 0, 'простой'),
			(8, 'Какой оператор используется для сравнения?', '["==", "=", "!=", "==="]', 0, 'простой'),
			(8, 'Что такое компилятор?', '["Переводит код в машинный язык", "Редактор кода", "База данных", "Фреймворк"]', 0, 'простой'),

			(8, 'Что такое ООП?', '["Объектно-ориентированное программирование", "Операционная система", "Объектная организация памяти", "Оптимизация операций"]', 0, 'средний'),
			(8, 'Что такое рекурсия?', '["Функция, вызывающая саму себя", "Бесконечный цикл", "Оптимизация кода", "Тип данных"]', 0, 'средний'),
			(8, 'Что такое Git?', '["Система контроля версий", "Язык программирования", "База данных", "Фреймворк"]', 0, 'средний'),
			(8, 'Что такое API?', '["Интерфейс программирования приложений", "Язык запросов", "Протокол передачи", "База данных"]', 0, 'средний'),
			(8, 'Что такое SQL?', '["Язык запросов к базам данных", "Язык программирования", "Фреймворк", "Протокол"]', 0, 'средний'),
			(8, 'Что такое MVC?', '["Архитектурный паттерн", "Язык программирования", "База данных", "Фреймворк"]', 0, 'средний'),
			(8, 'Что такое Docker?', '["Платформа для контейнеризации", "Язык программирования", "База данных", "Фреймворк"]', 0, 'средний'),

			(8, 'Что такое полиморфизм в ООП?', '["Возможность объектов иметь разные формы", "Наследование свойств", "Инкапсуляция данных", "Абстракция"]', 0, 'сложный'),
			(8, 'Что такое асимптотическая сложность?', '["Оценка времени выполнения алгоритма", "Сложность кода", "Количество переменных", "Размер программы"]', 0, 'сложный'),
			(8, 'Что такое мемоизация?', '["Кэширование результатов функций", "Оптимизация памяти", "Сжатие данных", "Шифрование"]', 0, 'сложный'),
			(8, 'Что такое паттерн "Наблюдатель"?', '["Поведенческий паттерн", "Порождающий паттерн", "Структурный паттерн", "Архитектурный паттерн"]', 0, 'сложный'),
			(8, 'Что такое хеш-таблица?', '["Структура данных ключ-значение", "База данных", "Алгоритм сортировки", "Тип данных"]', 0, 'сложный'),
			(8, 'Что такое deadlock?', '["Взаимная блокировка процессов", "Ошибка компиляции", "Утечка памяти", "Бесконечный цикл"]', 0, 'сложный'),
			(8, 'Что такое WebSocket?', '["Протокол двусторонней связи", "Язык программирования", "База данных", "Фреймворк"]', 0, 'сложный')
		ON conflict (%v)
		DO UPDATE SET
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v,
			%v = EXCLUDED.%v;
		`, questions_tableName, questions_TopicIDColumnName, questions_QuestionTextColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName,
		questions_QuestionTextColumnName, questions_TopicIDColumnName, questions_TopicIDColumnName, questions_AnswersColumnName, questions_AnswersColumnName, questions_CorrectOptionIndexColumnName, questions_CorrectOptionIndexColumnName, questions_HardLevelColumnName, questions_HardLevelColumnName,
	)
	return nil
}
